---
phase: 01-installation-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - bin/install.js
  - src/output.js
autonomous: true

must_haves:
  truths:
    - "Running `node bin/install.js --help` displays usage information"
    - "Package has correct bin field for npx execution"
    - "Terminal output helper functions produce colored output"
  artifacts:
    - path: "package.json"
      provides: "npm package config with bin field"
      contains: "\"bin\""
    - path: "bin/install.js"
      provides: "CLI entry point"
      min_lines: 15
    - path: "src/output.js"
      provides: "Terminal output helpers"
      exports: ["success", "error", "warn", "info"]
  key_links:
    - from: "package.json"
      to: "bin/install.js"
      via: "bin field"
      pattern: "\"cline-gsd\": \"bin/install.js\""
    - from: "bin/install.js"
      to: "src/output.js"
      via: "import"
      pattern: "import.*from.*output"
---

<objective>
Create the npm package scaffolding with npx entry point and terminal output helpers.

Purpose: Establish the foundation for the CLI installer that users will run via `npx cline-gsd`
Output: Working npm package structure that can be executed via `node bin/install.js`
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-installation-foundation/01-CONTEXT.md
@.planning/phases/01-installation-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create package.json for Cline-GSD</name>
  <files>package.json</files>
  <action>
Replace the existing upstream package.json with a new Cline-GSD package.json:

- name: "cline-gsd"
- version: "1.0.0"
- description: "GSD (Get Shit Done) workflow system for Cline"
- type: "module" (ESM)
- bin: { "cline-gsd": "bin/install.js" }
- engines: { "node": ">=20.0.0" }
- files: ["bin", "src", "workflows"]
- dependencies: picocolors (^1.1.1), ora (^8.x), command-exists (^1.2.9)
- keywords: cline, gsd, ai, workflow, cli
- author, license (MIT), repository fields

Do NOT include devDependencies or scripts from upstream - this is a fresh Cline-specific package.
  </action>
  <verify>Run `cat package.json | grep -E "(name|bin|type)"` shows correct values</verify>
  <done>package.json exists with cline-gsd name, ESM type, and bin field pointing to bin/install.js</done>
</task>

<task type="auto">
  <name>Task 2: Create terminal output helpers</name>
  <files>src/output.js</files>
  <action>
Create src/output.js with colored terminal output functions using picocolors:

1. Import picocolors as `pc`

2. Define Unicode symbols:
   - success: green checkmark
   - error: red X
   - warning: yellow warning sign
   - info: blue info symbol

3. Export functions:
   - `success(msg)` - logs green checkmark + message
   - `error(msg)` - logs red X + red message
   - `warn(msg)` - logs yellow warning + yellow message
   - `info(msg)` - logs blue info + message
   - `dim(msg)` - returns dimmed text (for secondary info)
   - `cyan(msg)` - returns cyan text (for highlights)
   - `isColorSupported()` - returns pc.isColorSupported for conditional formatting

4. All functions should use console.log with 2-space indent for visual consistency

Reference the patterns from 01-RESEARCH.md "Colored Output with Checkmarks" section.
  </action>
  <verify>Run `node -e "import('./src/output.js').then(m => m.success('test'))"` shows green checkmark</verify>
  <done>src/output.js exports success, error, warn, info functions with colored output</done>
</task>

<task type="auto">
  <name>Task 3: Create CLI entry point</name>
  <files>bin/install.js</files>
  <action>
Create bin/install.js as the npx entry point:

1. Add shebang: `#!/usr/bin/env node`

2. Import output helpers from '../src/output.js'

3. Parse CLI arguments (simple, no library needed):
   - --help, -h: show help
   - --verbose, -v: enable verbose mode
   - --force, -f: force overwrite
   - --version: show version

4. Read version from package.json using createRequire (ESM pattern)

5. Display banner on start:
   ```
   Cline-GSD v{version}
   GSD workflow system for Cline
   ```
   Use cyan for "Cline-GSD", dim for version

6. If --help: display usage and exit
   ```
   Usage: npx cline-gsd [options]

   Options:
     -h, --help     Show this help message
     -v, --verbose  Show detailed output
     -f, --force    Force overwrite existing installation
     --version      Show version number

   After installation, run /gsd:health in Cline to verify.
   ```

7. If --version: display version and exit

8. Otherwise: log "Installation starting..." (placeholder for next plan)

Reference 01-RESEARCH.md "CLI Argument Parsing" and "npx Entry Point" patterns.
  </action>
  <verify>Run `node bin/install.js --help` displays usage information, `node bin/install.js --version` displays version</verify>
  <done>bin/install.js runs via node, parses arguments, displays help/version</done>
</task>

</tasks>

<verification>
1. `cat package.json | jq '.name, .type, .bin'` shows "cline-gsd", "module", correct bin
2. `node bin/install.js --help` shows usage information
3. `node bin/install.js --version` shows "1.0.0"
4. `node bin/install.js` shows banner and "Installation starting..."
5. `node -e "import('./src/output.js').then(m => { m.success('OK'); m.error('FAIL'); m.warn('WARN'); })"` shows colored output
</verification>

<success_criteria>
- package.json correctly configured for npx execution
- bin/install.js executable and parses all flags
- src/output.js provides working colored output helpers
- No runtime errors when executing entry point
</success_criteria>

<output>
After completion, create `.planning/phases/01-installation-foundation/01-01-SUMMARY.md`
</output>
